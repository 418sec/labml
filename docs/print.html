<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lab</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="guide/index.html"><strong aria-hidden="true">3.</strong> Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/logger.html"><strong aria-hidden="true">3.1.</strong> Logger</a></li><li class="chapter-item expanded "><a href="guide/sections.html"><strong aria-hidden="true">3.2.</strong> Sections</a></li><li class="chapter-item expanded "><a href="guide/iterator_enumerator.html"><strong aria-hidden="true">3.3.</strong> Iterator &amp; Enumerator</a></li><li class="chapter-item expanded "><a href="guide/loop.html"><strong aria-hidden="true">3.4.</strong> Loop</a></li><li class="chapter-item expanded "><a href="guide/log_indicators.html"><strong aria-hidden="true">3.5.</strong> Log Indicators</a></li><li class="chapter-item expanded "><a href="guide/experiment.html"><strong aria-hidden="true">3.6.</strong> Experiment</a></li><li class="chapter-item expanded "><a href="guide/configs.html"><strong aria-hidden="true">3.7.</strong> Configurations &amp; Hyper-parameters</a></li></ol></li><li class="chapter-item expanded "><a href="samples/index.html"><strong aria-hidden="true">4.</strong> Samples</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Lab</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p align="center">
  <img src="https://github.com/vpj/lab/raw/832758308905ee20ba9841fa80c47c77d7e58fda/images/logo.png?raw=true" width="100" title="Logo">
</p>
<h1><a class="header" href="#a-hrefhttpsgithubcomvpjlablab-30a" id="a-hrefhttpsgithubcomvpjlablab-30a"><a href="https://github.com/vpj/lab">Lab 3.0</a></a></h1>
<p>This library helps you organize and track
machine learning experiments.</p>
<p><strong>ðŸ’¬ <a href="https://join.slack.com/t/labforml/shared_invite/zt-cg5iui5u-4cJPT7DUwRGqup9z8RHwhQ">Slack workspace for discussions</a></strong>	</p>
<p><strong>ðŸŽ› <a href="https://github.com/vpj/lab_dashboard">Dashboard</a> is the web 
interface for Lab.</strong></p>
<h2><a class="header" href="#features" id="features">Features</a></h2>
<p>Main features of Lab are:</p>
<ul>
<li>Organizing experiments</li>
<li><a href="https://github.com/vpj/lab_dashboard">Dashboard</a> to browse experiments</li>
<li>Logger</li>
<li>Managing configurations and hyper-parameters</li>
</ul>
<h3><a class="header" href="#organizing-experiments" id="organizing-experiments">Organizing Experiments</a></h3>
<p>Lab keeps track of all the model training statistics.
It keeps them in a SQLite database and also pushes them to Tensorboard.
It also organizes the checkpoints and any other artifacts you wish to save.
All of these could be accessed with the Python API and also stored
in a human friendly folder structure.
This could be  of your training pro
Maintains logs, summaries and checkpoints of all the experiment runs 
in a folder structure.</p>
<h3><a class="header" href="#a-hrefhttpsgithubcomvpjlab_dashboarddashboarda-to-browse-experiments" id="a-hrefhttpsgithubcomvpjlab_dashboarddashboarda-to-browse-experiments"><a href="https://github.com/vpj/lab_dashboard">Dashboard</a> to browse experiments</a></h3>
<p align="center">
  <img style="max-width:100%;"
   src="https://raw.githubusercontent.com/vpj/lab/master/images/dashboard.png"
   width="1024" title="Dashboard Screenshot">
</p>
<p>The web dashboard helps navigate experiments and multiple runs.
You can checkout the configs and a summary of performance.
You can launch TensorBoard directly from there.</p>
<p><em>Eventually, we want to let you edit configs and run new experiments and analyse
outputs on the dashboard.</em></p>
<h3><a class="header" href="#logger" id="logger">Logger</a></h3>
<p>Logger has a simple API to produce pretty console outputs.</p>
<p>It also comes with a bunch of helper functions that manages
iterators and loops.</p>
<p align="center">
 <img style="max-width:100%" 
   src="https://raw.githubusercontent.com/vpj/lab/master/images/loop.gif"
  />
</p>
<h3><a class="header" href="#manage-configurations-and-hyper-parameters" id="manage-configurations-and-hyper-parameters">Manage configurations and hyper-parameters</a></h3>
<p>You can setup configs/hyper-parameters with functions.
<a href="https://github.com/vpj/lab">Lab</a> would identify the dependencies and run 
them in topological order.</p>
<pre><code class="language-python">@Configs.calc()
def model(c: Configs):
    return Net().to(c.device)
</code></pre>
<p>You can setup multiple options for configuration functions. 
So you don't have to write a bunch if statements to handle configs.</p>
<pre><code class="language-python">@Configs.calc(Configs.optimizer)
def sgd(c: Configs):
    return optim.SGD(c.model.parameters(), lr=c.learning_rate, momentum=c.momentum)

@Configs.calc(Configs.optimizer)
def adam(c: Configs):
    return optim.Adam(c.model.parameters())
</code></pre>
<h2><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h2>
<h3><a class="header" href="#clone-and-install" id="clone-and-install">Clone and install</a></h3>
<pre><code class="language-bash">git clone git@github.com:vpj/lab.git
cd lab
pip install -e .
</code></pre>
<p>To update run a git update</p>
<pre><code class="language-bash">cd lab
git pull
</code></pre>
<!-- ### Install it via `pip` directly from github.

```bash
pip install -e git+git@github.com:vpj/lab.git#egg=lab
``` -->
<h3><a class="header" href="#create-a-labyaml-file" id="create-a-labyaml-file">Create a <code>.lab.yaml</code> file.</a></h3>
<p>An empty file at the root of the project should
be enough. You can set project level configs for
'check_repo_dirty' and 'path'
in the config file.</p>
<p>Lab will store all experiment data in folder <code>logs/</code> 
relative to <code>.lab.yaml</code> file.
If <code>path</code> is set in <code>.lab.yaml</code> then it will be stored in <code>[path]logs/</code>
relative to <code>.lab.yaml</code> file.</p>
<p>You don't need the <code>.lab.yaml</code> file if you only plan on using the logger.</p>
<h2><a class="header" href="#lab-dashboard" id="lab-dashboard">Lab Dashboard</a></h2>
<h3><a class="header" href="#clone-and-install-1" id="clone-and-install-1">Clone and install</a></h3>
<pre><code class="language-bash">git clone git@github.com:vpj/lab_dashboard.git
cd lab_dashboard
git submodule init
git submodule update
./install.sh
</code></pre>
<p>To update run a git update</p>
<pre><code class="language-bash">cd lab_dashboard
git pull
git submodule update
./install.sh
</code></pre>
<h3><a class="header" href="#starting-the-server" id="starting-the-server">Starting the server</a></h3>
<p>Navigate to the path of the project and run the following command to start the server.</p>
<pre><code class="language-bash">lab_dashboard
</code></pre>
<p>This short tutorial covers most of the usage patterns. We still don't have a proper documentation, but the source code of the project is quite clean and I assume you can dive into it if you need more details.</p>
<h3><a class="header" href="#logger-1" id="logger-1">Logger</a></h3>
<pre><code class="language-python">from lab import logger
from lab.logger.colors import Text, Color
</code></pre>
<h4><a class="header" href="#logging-with-colors" id="logging-with-colors">Logging with colors</a></h4>
<pre><code class="language-python">logger.log(&quot;Colors are missing when views on github&quot;, Text.highlight)
</code></pre>
<pre><strong><span style="color: #DDB62B">Colors are missing when views on github</span></strong></pre>
<p>You can use predifined styles</p>
<pre><code class="language-python">logger.log([
    ('Styles ', Text.heading),
    ('Danger ', Text.danger),
    ('Warning ', Text.warning),
    ('Meta ', Text.meta),
    ('Key ', Text.key),
    ('Meta2 ', Text.meta2),
    ('Title ', Text.title),
    ('Heading ', Text.heading),
    ('Value ', Text.value),
    ('Highlight ', Text.highlight),
    ('Subtle', Text.subtle)
])
</code></pre>
<pre><span style="text-decoration: underline">Styles </span><span style="color: #E75C58">Danger </span><span style="color: #DDB62B">Warning </span><span style="color: #208FFB">Meta </span><span style="color: #60C6C8">Key </span><span style="color: #D160C4">Meta2 </span><strong><span style="text-decoration: underline">Title </span></strong><span style="text-decoration: underline">Heading </span><strong>Value </strong><strong><span style="color: #DDB62B">Highlight </span></strong><span style="color: #C5C1B4">Subtle</span></pre>
<p>Or, specify colors</p>
<pre><code class="language-python">logger.log([
    ('Colors ', Text.heading),
    ('Red ', Color.red),
    ('Black ', Color.black),
    ('Blue ', Color.blue),
    ('Cyan ', Color.cyan),
    ('Green ', Color.green),
    ('Orange ', Color.orange),
    ('Purple Heading ', [Color.purple, Text.heading]),
    ('White', Color.white),
])
</code></pre>
<pre><span style="text-decoration: underline">Colors </span><span style="color: #E75C58">Red </span><span style="color: #3E424D">Black </span><span style="color: #208FFB">Blue </span><span style="color: #60C6C8">Cyan </span><span style="color: #00A250">Green </span><span style="color: #DDB62B">Orange </span><span style="color: #D160C4"><span style="text-decoration: underline">Purple Heading </span></span><span style="color: #C5C1B4">White</span></pre>
<h5><a class="header" href="#logging-debug-info" id="logging-debug-info">Logging debug info</a></h5>
<p>You can pretty print python objects</p>
<pre><code class="language-python">logger.info(a=2, b=1)
</code></pre>
<pre><span style="color: #60C6C8">a: </span><strong>2</strong>
<span style="color: #60C6C8">b: </span><strong>1</strong></pre>
<pre><code class="language-python">logger.info(dict(name='Name', price=22))
</code></pre>
<pre><span style="color: #60C6C8"> name: </span><strong>Name</strong>
<span style="color: #60C6C8">price: </span><strong>22</strong>
Total <span style="color: #208FFB">2</span> item(s)</pre>
<h3><a class="header" href="#sections" id="sections">Sections</a></h3>
<p>Sections let you monitor time taken for
different tasks and also helps <em>keep the code clean</em>
by separating different blocks of code.</p>
<pre><code class="language-python">import time
</code></pre>
<pre><code class="language-python">with logger.section(&quot;Load data&quot;):
    # code to load data
    time.sleep(2)
</code></pre>
<pre>Load data<span style="color: #00A250">...[DONE]</span><span style="color: #208FFB">	2,005.04ms</span>
</pre>
<pre><code class="language-python">with logger.section(&quot;Load saved model&quot;):
    time.sleep(1)
    logger.set_successful(False)
</code></pre>
<pre>Load saved model<span style="color: #E75C58">...[FAIL]</span><span style="color: #208FFB">	1,008.86ms</span>
</pre>
<p>You can also show progress while a section is running</p>
<pre><code class="language-python">with logger.section(&quot;Train&quot;, total_steps=100):
    for i in range(100):
        time.sleep(0.1)
        # Multiple training steps in the inner loop
        logger.progress(i)
</code></pre>
<pre>Train<span style="color: #00A250">...[DONE]</span><span style="color: #208FFB">	10,600.04ms</span>
</pre><h3><a class="header" href="#iterator-and-enumerator" id="iterator-and-enumerator">Iterator and Enumerator</a></h3>
<p>You can use <code>logger.iterate</code> and <code>logger.enumerate</code> with any iterable object.
In this example we use a PyTorch <code>DataLoader</code>.</p>
<pre><code class="language-python"># Create a data loader for illustration
import torch
from torchvision import datasets, transforms

test_loader = torch.utils.data.DataLoader(
        datasets.MNIST('./data',
                       train=False,
                       download=True,
                       transform=transforms.Compose([
                           transforms.ToTensor(),
                           transforms.Normalize((0.1307,), (0.3081,))
                       ])),
        batch_size=32, shuffle=True)
</code></pre>
<pre><code class="language-python">for data, target in logger.iterate(&quot;Test&quot;, test_loader):
    time.sleep(0.01)
</code></pre>
<pre>Test<span style="color: #00A250">...[DONE]</span><span style="color: #208FFB">	6,618.08ms</span>
</pre>
<pre><code class="language-python">for i, (data, target) in logger.enum(&quot;Test&quot;, test_loader):
    time.sleep(0.01)
</code></pre>
<pre>Test<span style="color: #00A250">...[DONE]</span><span style="color: #208FFB">	6,662.78ms</span>
</pre>
<h3><a class="header" href="#loop" id="loop">Loop</a></h3>
<p>This can be used for the training loop.
The <code>loop</code> keeps track of the time taken and time remaining for the loop.
You can use <em>sections</em>, <em>iterators</em> and <em>enumerators</em> within loop.</p>
<p><code>logger.write</code> outputs the current status along with global step.</p>
<pre><code class="language-python">for step in logger.loop(range(0, 400)):
	logger.write()
</code></pre>
<pre><strong><span style="color: #DDB62B">     399:  </span></strong>  <span style="color: #208FFB">1ms</span><span style="color: #D160C4">  0:00m/  0:00m  </span></pre>
<p>The global step is used for logging to the screen, TensorBoard and when logging analytics to SQLite. You can manually set the global step. Here we will reset it.</p>
<pre><code class="language-python">logger.set_global_step(0)
</code></pre>
<p>You can manually increment global step too.</p>
<pre><code class="language-python">for step in logger.loop(range(0, 400)):
    logger.add_global_step(5)
    logger.write()
</code></pre>
<pre><strong><span style="color: #DDB62B">   2,000:  </span></strong>  <span style="color: #208FFB">1ms</span><span style="color: #D160C4">  0:00m/  0:00m  </span></pre>
<h3><a class="header" href="#log-indicators" id="log-indicators">Log indicators</a></h3>
<p>Here you specify indicators and the logger stores them temporarily and write in batches.
It can aggregate and write them as means or histograms.</p>
<pre><code class="language-python">import numpy as np

# dummy train function
def train():
    return np.random.randint(100)

# Reset global step because we incremented in previous loop
logger.set_global_step(0)
</code></pre>
<p>This stores all the loss values and writes the logs the mean on every tenth iteration.
Console output line is replaced until <code>new_line</code> is called.</p>
<pre><code class="language-python">for i in range(1, 401):
    logger.add_global_step()
    loss = train()
    logger.store(loss=loss)
    if i % 10 == 0:
        logger.write()
    if i % 100 == 0:
        logger.new_line()
    time.sleep(0.02)
</code></pre>
<pre><strong><span style="color: #DDB62B">     100:  </span></strong> loss: <strong> 42.8000</strong>
<strong><span style="color: #DDB62B">     200:  </span></strong> loss: <strong> 39.0000</strong>
<strong><span style="color: #DDB62B">     300:  </span></strong> loss: <strong> 39.7000</strong>
<strong><span style="color: #DDB62B">     400:  </span></strong> loss: <strong> 53.6000</strong></pre>
<h4><a class="header" href="#indicator-settings" id="indicator-settings">Indicator settings</a></h4>
<pre><code class="language-python">from lab.logger.indicators import Queue, Scalar, Histogram

# dummy train function
def train2(idx):
    return idx, 10, np.random.randint(100)

# Reset global step because we incremented in previous loop
logger.set_global_step(0)
</code></pre>
<p><code>Histogram</code> indicators will log a histogram of data.
<code>Queue</code> will store data in a <code>deque</code> of size <code>queue_size</code>, and log histograms.
Both of these will log the means too. And if <code>is_print</code> is <code>True</code> it will print the mean.</p>
<p>queue size of <code>10</code> and the values are printed to the console</p>
<pre><code class="language-python">logger.add_indicator(Queue('reward', 10, True))
</code></pre>
<p>By default values are not printed to console; i.e. <code>is_print</code> defaults to <code>False</code>.</p>
<pre><code class="language-python">logger.add_indicator(Scalar('policy'))
</code></pre>
<p>Settings <code>is_print</code> to <code>True</code> will print the mean value of histogram to console</p>
<pre><code class="language-python">logger.add_indicator(Histogram('value', True))
</code></pre>
<pre><code class="language-python">for i in range(1, 400):
    logger.add_global_step()
    reward, policy, value = train2(i)
    logger.store(reward=reward, policy=policy, value=value, loss=1.)
    if i % 10 == 0:
        logger.write()
    if i % 100 == 0:
        logger.new_line()
</code></pre>
<pre><strong><span style="color: #DDB62B">     100:  </span></strong> loss: <strong> 1.00000</strong> reward: <strong> 95.5000</strong> value: <strong> 40.5000</strong>
<strong><span style="color: #DDB62B">     200:  </span></strong> loss: <strong> 1.00000</strong> reward: <strong> 195.500</strong> value: <strong> 53.4000</strong>
<strong><span style="color: #DDB62B">     300:  </span></strong> loss: <strong> 1.00000</strong> reward: <strong> 295.500</strong> value: <strong> 60.3000</strong>
<strong><span style="color: #DDB62B">     390:  </span></strong> loss: <strong> 1.00000</strong> reward: <strong> 385.500</strong> value: <strong> 45.0000</strong></pre>
<h3><a class="header" href="#experiment" id="experiment">Experiment</a></h3>
<p>Lab will keep track of experiments if you declare an Experiment. It will keep track of logs, code diffs, git commits, etc.</p>
<pre><code class="language-python">from lab.experiment.pytorch import Experiment
</code></pre>
<p>The <code>name</code> of the defaults to the calling python filename. However when invoking from a Jupyter Notebook it must be provided because the library cannot find the calling file name. <code>comment</code> can be changed later from the <a href="https://github.com/vpj/lab_dashboard">Dashboard</a>.</p>
<pre><code class="language-python">exp = Experiment(name=&quot;mnist_pytorch&quot;,
                 comment=&quot;Test&quot;)
</code></pre>
<p>Starting an experiments creates folders, stores the experiment meta data, git commits, and source diffs.</p>
<pre><code class="language-python">exp.start()
</code></pre>
<pre><strong><span style="text-decoration: underline">mnist_pytorch</span></strong>: <span style="color: #208FFB">a4a7586664f411eab095acde48001122</span>
	<strong><span style="color: #DDB62B">Test</span></strong>
	[dirty]: <strong><span style="color: #DDB62B">"Update readme.md"</span></strong></pre>
<p>You can also start from a previously saved checkpoint. A <code>run_uuid</code> of `` means that it will load from the last run.</p>
<pre><code class="language-python">exp.start(run_uuid='')
</code></pre>
<h3><a class="header" href="#configs" id="configs">Configs</a></h3>
<pre><code class="language-python">from lab import configs
</code></pre>
<p>The configs will be stored and in future be adjusted from  <a href="https://github.com/vpj/lab_dashboard">Dashboard</a></p>
<pre><code class="language-python">class DeviceConfigs(configs.Configs):
    use_cuda: bool = True
    cuda_device: int = 0

    device: any
</code></pre>
<p>Some configs can be calculated</p>
<pre><code class="language-python">import torch
</code></pre>
<pre><code class="language-python">@DeviceConfigs.calc(DeviceConfigs.device)
def cuda(c: DeviceConfigs):
    is_cuda = c.use_cuda and torch.cuda.is_available()
    if not is_cuda:
        return torch.device(&quot;cpu&quot;)
    else:
        if c.cuda_device &lt; torch.cuda.device_count():
            return torch.device(f&quot;cuda:{c.cuda_device}&quot;)
        else:
            logger.log(f&quot;Cuda device index {c.cuda_device} higher than &quot;
                       f&quot;device count {torch.cuda.device_count()}&quot;, Text.warning)
            return torch.device(f&quot;cuda:{torch.cuda.device_count() - 1}&quot;)
</code></pre>
<p>Configs classes can be inherited. This can be used to separate configs into module and it is quite neat when you want to inherit entire experiment setups and make a few modifications. </p>
<pre><code class="language-python">class Configs(DeviceConfigs):
    model_size: int = 10
        
    model: any = 'cnn_model'
</code></pre>
<p>You can specify multiple config calculator functions. The function given by the string for respective attribute will be picked.</p>
<pre><code class="language-python">@Configs.calc(Configs.model)
def cnn_model(c: Configs):
    return c.model_size * 10

@Configs.calc(Configs.model)
def lstm_model(c: Configs):
    return c.model_size * 2
</code></pre>
<p>The experiment will calculate the configs.</p>
<pre><code class="language-python">conf = Configs()
conf.model = 'lstm_model'
experiment = Experiment(name='test_configs')
experiment.calc_configs(conf)
logger.info(model=conf.model)
</code></pre>
<pre>                                                                                                    
<span style="color: #60C6C8">model: </span><strong>20</strong></pre><h3><a class="header" href="#a-hrefhttpsgithubcomvpjlabtreemastersamplessamplesa" id="a-hrefhttpsgithubcomvpjlabtreemastersamplessamplesa"><a href="https://github.com/vpj/lab/tree/master/samples">Samples</a></a></h3>
<p><a href="https://github.com/vpj/lab/tree/master/samples">Samples folder</a> contains a
bunch of examples of using lab.</p>
<p>Here are some <a href="http://blog.varunajayasiri.com/ml/lab3/#samples%2Fmnist_loop.py">annotated samples</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
